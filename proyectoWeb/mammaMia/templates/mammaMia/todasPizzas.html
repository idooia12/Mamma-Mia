<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Todas las pizzas - Mamma Mia</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'mama.css' %}">
</head>
<body>

<header>
    <h1>üçï Mamma Mia</h1>
    <p>Listado completo de nuestras pizzas</p>
</header>

<nav>
    <a href="{% url 'index' %}">üè† Inicio</a>
    <a href="{% url 'todasLasPizzas' %}">üìã Todas las pizzas</a>
</nav>

<div class="filtros-container">
    <form method="get">
        
        <!-- Filtro por masa -->
        <div class="filtro-seccion">
            <label for="masa" class="filtro-label">Filtrar por masa:</label>
            <select name="masa" id="masa" class="select-masa">
                <option value="">Todas</option>
                {% for masa in masas %}
                <option value="{{ masa.id }}" {% if masa_seleccionada == masa.id|stringformat:"s" %}selected{% endif %}>
                    {{ masa.nombre }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- Filtro por ingredientes -->
        <div class="filtro-seccion ingredientes-grid">
            <span class="filtro-label">Filtrar por ingredientes:</span>
            <div class="grid-ingredientes">
                {% for ingrediente in ingredientes %}
                <label class="checkbox-ingrediente">
                    <input type="checkbox" name="ingredientes" value="{{ ingrediente.id }}"
                    {% if ingrediente.id in ingredientes_seleccionados %}checked{% endif %}>
                    {{ ingrediente.nombre }}
                </label>
                {% endfor %}
            </div>
        </div>

        <!-- Botones -->
        <div class="botones-filtro">
            <button type="submit" class="btn-buscar">Buscar</button>
            <a href="{% url 'todasLasPizzas' %}" class="btn-limpiar">Limpiar</a>
        </div>
    </form>
</div>

<div class="contenedor">
    
    {% if pizzas %}
        {% for pizza in pizzas %}
        <div class="pizza">
            <div class="pizza-contenido">
                <div class="pizza-info">
                    <a href="{% url 'detallePizza' pizza.id %}" class="pizza-link"></a>
                        <h2>{{ pizza.nombre }}</h2>
                    </a>
                    <p><strong>Masa:</strong> {{ pizza.masa.nombre }}</p>
                    <p><strong>Precio:</strong> <span class="precio">{{ pizza.precio }} ‚Ç¨</span></p>
                </div>

                <div class="pizza-imagen">
                    {% if pizza.imagen %}
                        <img src="{{ pizza.imagen.url }}" alt="{{ pizza.nombre }}">
                    {% else %}
                        <p>Sin imagen disponible</p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No hay pizzas registradas todav√≠a.</p>
    {% endif %}
</div>

<footer>
    <p>¬© Mamma Mia üçï</p>
</footer>

</body>
</html>
