<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Todas las pizzas - Mamma Mia</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'mama.css' %}">
</head>
<body>

<header>
    <h1>üçï Mamma Mia</h1>
    <p>Listado completo de nuestras pizzas</p>
</header>

<nav>
    <a href="{% url 'index' %}">üè† Inicio</a>
    <a href="{% url 'todasLasPizzas' %}">üìã Todas las pizzas</a>
</nav>

<div class="contenedor">

    <h1 style="text-align:center;">üìã Todas las Pizzas</h1>

    <form method="get" class="filtro-form">
        <div class="filtros">
            <div class="filtro-masa">
                <label for="masa">Filtrar por masa:</label>
                <select name="masa" id="masa">
                    <option value="">-- Todas las masas --</option>
                    {% for masa in masas %}
                        <option value="{{ masa.id }}" {% if masa.id|stringformat:"s" == masa_seleccionada %}selected{% endif %}>
                            {{ masa.nombre }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="filtro-ingredientes">
                <label>Filtrar por ingredientes:</label>
                <div class="ingredientes-lista">
                    {% for ing in ingredientes %}
                        <label>
                            <input type="checkbox" name="ingredientes" value="{{ ing.id }}"
                                {% if ing.id in ingredientes_seleccionados %}checked{% endif %}>
                            {{ ing.nombre }}
                        </label>
                    {% endfor %}
                </div>
            </div>

            <button type="submit" class="boton-filtrar">Buscar</button>
            <a href="{% url 'todasLasPizzas' %}" class="boton-limpiar">Limpiar</a>
        </div>
    </form>

    {% if pizzas %}
        {% for pizza in pizzas %}
        <div class="pizza">
            <div class="pizza-contenido">
                <div class="pizza-info">
                    <a href="{% url 'detallePizza' pizza.id %}" class="pizza-link"></a>
                        <h2>{{ pizza.nombre }}</h2>
                    </a>
                    <p><strong>Masa:</strong> {{ pizza.masa.nombre }}</p>
                    <p><strong>Precio:</strong> <span class="precio">{{ pizza.precio }} ‚Ç¨</span></p>
                </div>

                <div class="pizza-imagen">
                    {% if pizza.imagen %}
                        <img src="{{ pizza.imagen.url }}" alt="{{ pizza.nombre }}">
                    {% else %}
                        <p>Sin imagen disponible</p>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No hay pizzas registradas todav√≠a.</p>
    {% endif %}
</div>

<footer>
    <p>¬© Mamma Mia üçï</p>
</footer>

</body>
</html>
